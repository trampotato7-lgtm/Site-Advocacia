backend:
  name: git-gateway
  branch: main

media_folder: "public/images/uploads"
public_folder: "/images/uploads"

collections:
  # Artigos (salva .md)
  - name: "posts"
    label: "Artigos"
    folder: "public/content/posts"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    fields:
      - {label: "Título", name: "title", widget: "string"}
      - {label: "Data", name: "date", widget: "datetime"}
      - {label: "Categoria", name: "category", widget: "string", required: false}
      - {label: "Descrição", name: "description", widget: "text", required: false}
      - {label: "Imagem de destaque", name: "image", widget: "image", required: false}
      - {label: "Autor", name: "author", widget: "string", default: "Dr. Carlos Silva"}
      - {label: "Conteúdo", name: "body", widget: "markdown"}

  # Lista de artigos (SALVA O SLUG, mostra o TÍTULO)
  - name: "postsIndex"
    label: "Lista de Artigos"
    files:
      - name: "postsIndexFile"
        label: "Artigos Publicados"
        file: "public/posts.json"
        fields:
          - label: "Artigos no blog"
            name: "posts"
            widget: "list"
            summary: "{{fields.titulo}}"
            field:
              name: "slug"
              widget: "relation"
              collection: "posts"
              search_fields: ["title"]
              value_field: "slug"        # ← O QUE É SALVO NO JSON
              display_fields: ["title"]  # ← O QUE O CLIENTE VÊ
              multiple: false